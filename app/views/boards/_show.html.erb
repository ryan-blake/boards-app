<div id="show-view">
<% if ( user_signed_in? && current_user.id === @board.user.id || @board.customer_id) || (@board.for_sale == true ) %>

<div class="container-fluid">
  <!-- shipping detail? try to clean up and gather data from stripe token -->
      </div>
    <!-- edit button plus contact for shipping, is contact for shipping necessary -->
  <div class="well-sm pull-left" style="position:absolute;top:0;z-index:929;">
    <% if (current_user && current_user.id == @board.user_id)&& (@board.shipping != true || false) %>
      <%= link_to "Edit", edit_board_path, class: 'btn btn-primary pull-right', remote: true, data: { toggle: "modal", target: "#editModal" } %>
       <div style="z-index:1000;min-width:50px;min-height:50px;background-color:white;">
        <% if @board.shipping == true %>
          <% if @board.tracking != true || false %>
          <%= render partial: 'tracking', locals: {board: @board} %>
          <% end %>
        <% end %>
        </div>
      <% elsif @board.shipping == false %>
        <% @a = @board.customer_id %>
        contact <% b = User.find(@a).email %>
        <%= b %>
        for pickup info
      <% end %>
  </div>

      <!-- begin view -->

<div class="title center-text">
  <strong><%= @board.title %></strong>
</div>
<!--  images -->
  <div class="image-box center-text" id="images" style="">
    <%= render partial: 'images', locals: {board: @board}  %>
  </div>

<hr class="style13" style="top:440px;">
  <div class="dimensions-modal" style="">
    <table class="col-sm-3 col-md-5" style="">
      <thead>
        <th class="col-sm-3"> Make: </th>
        <th class="col-sm-3"> dimensions: </th>
        <% if @board.used == false %>
          <th class="col-sm-3"> Used </th>
        <% end %>
      </thead>
      <tbody>
        <td class="col-sm-6 col-md-8 col-lg-8"> <%= @board.make %> </td>
        <% if @board.size.feet.to_i > 0 %>
             <td class="col-sm-5"><span><%=  @board.size.feet  %>' <%= @board.size.inches %>" x <%=  @board.size.width %>" x <%=  @board.size.thickness %>"</span>
             </td>
        <% else %>
          <td class="col-sm-3"><%= @board.size.length %> <%= @board.size.width %> <%=@board.size.unit.name %></td>
        <% end %>
        <% if @board.type_id == 1 %>
         <td class="col-sm-3">
         <%= @board.size.volume%>
        <% end %>
      </tbody>
    </table>
</div>

<!-- section -->
  <div class="description-modal pull-right" style=";position:relative;clear:all;">
    <%= @board.description %>
  </div>
<!--  -->
<% if @accessories_boards && @accessories_boards.first.unit %>
<td class="col-sm-3">
  <%= @accessories_boards.first.title %>
  <%= @accessories_boards.first.measure %><%= @accessories_boards.first.unit.name %>
 </td>
 <% end %>


<div class="center-text">
  <tbody>
</tbody>
</div>
</div>
<script>
$(document).ready(function() {
var openAccess = document.getElementById('accessoryBtnOpen');
var hideAccess = document.getElementById('accessoryBtnHide');
var access = document.getElementById('searchAccessories');
openAccess.style.display = 'flex';
hideAccess.style.display = 'none';
openAccess.onclick = function() {
 if(this.style.display == 'flex') {
   this.style['display'] = 'none';
   hideAccess.style['display'] = 'flex';
   access.style['display'] = 'flex';
 }
};
hideAccess.onclick = function() {
 if(this.style.display == 'flex') {
   this.style['display'] = 'none';
   openAccess.style['display'] = 'flex';
   access.style['display'] = 'none';
 }
};
});

</script>
<div style="posisition:relative;" class="col-sm-12 col-md-12 col-lg-12">
  <div id="accessoryBtnOpen" style="display:flex;" class="btn btn-primary">search</div>
  <div id="accessoryBtnHide" style="display:none;" class="btn btn-danger">hide</div>
</div>
<div id="searchAccessories"  style="display:none;" class="col-md-9">
 <%= form_tag({controller: :accessories, action: :search_accessories}, {method: :get, remote: true}) do  %>
   <div class="input-group pull-left"style="max-width:50%;">
     <span class="input-group-btn">
     <%= grouped_collection_select  nil, :kind_id, Category.where(id: @board.category_id), :kinds,
           :name, :id, :name, {prompt: "Select Kind" },
           { id: 'Kind-select' , class: "form-control"} %>
     </span>
   </div>
     <div class="input-group pull-right" style="max-width:50%;">
       <span class="input-group-btn">
         <%= collection_select(nil, :brand, Accessory.where(category_id: @board.category_id,:user_id => @board.user_id).order(:brand).distinct.sort, :brand, :brand, {prompt: "Choose make"},{ class: "form-control" }) %>
        </span>
     </div>
 <div class="col-md-4">
    <div class="input-group">
      <%= text_field_tag :keyword, nil, class: 'form-control', :placeholder => "Accessories.."  %>
      <span class="input-group-btn">
        <%= hidden_field_tag :board_id, @board.id%>
        <%= button_tag "Go!", class: "btn btn-success", data: {disable_with: "<i class='fa fa-spinner fa-spin' ></i> Searching..."} %>
      </span>
    </div><!-- /input-group -->
  </div><!-- /.col-lg-6 -->
  <% end %>
</div>

<div id="boardAccessories" style="display:flex;position:relative;min-height:100px;min-width:100%;overflow-x:scroll;">

 </div>
<!--  -->
<style>
  .accessoryImage {
    display:block;
  }
  .accessoryImage1 {
    display:none;
  }
@media (max-width: 484px) {
  .accessoryImage {
    display:none;
  }
  .accessoryImage1 {
    display:block;
  }

}
@media (min-width:991px) and (max-width: 1199px) {
  #accessoryBtnOpen, #accessoryBtnHide {
    margin-top: 214px;
  }
 }
</style>
<!-- section -->
  <% if @board.rental %>
  <div class="rental-div" style="min-height:100%;">
        <div class="rent-dates">
          <span class="center-text">
            <div id="invisible" data-rubyvar="<%= @board.price  %>"></div>
          <div id="number" style="font-size:30px;"><%= @board.price %> </div>

          <%= render 'events/form', locals: {events: @events, board: @board} %>
        <!-- section -->
        </span>
        </div>
    <div id="events_calendar" style="max-width:100%;padding-bottom:30px;">
      <%= render 'events/calendar', locals: {events: @events, board: @board} %>
    </div>

</div>

<hr>
<script>

$('input[name="daterange"]').daterangepicker(
{
   locale: {
     format: 'YYYY-MM-DD'
   },
   startDate: "<%= Time.now %>",
   endDate: '<%= Time.now + 1.days%>',
   showDropdowns: true,
   autoApply: true,
   orientation: 'auto top',
   parentEl: '.modal-content'
},

function(start, end, label) {
   if ( start.format('YYYY-MM-DD') < end.format('YYYY-MM-DD') ) {
     var depDate = moment(start);
     var arrDate = moment(end);
     var nbDays = depDate.diff(arrDate, 'days');
     var one = 1;
     var rubyVar = $('#invisible').data('rubyvar');

     alert("A " + (-nbDays + one ) * (rubyVar) +" date range was chosen: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
   }
});
$('input[name="daterange"]').on('apply.daterangepicker', function(ev, picker) {

  alert("A old date range was changed: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));

});
</script>
  <% else %>
<!-- section -->
    <div class="payment center-text">
      <% if current_user && current_user.id == @board.user_id %>
        <strong data-board="<%= @board.price %>"style="font-size:30px;">$</strong>
      <% elsif @board.for_sale == true %>
         <strong style="font-size:30px;">$</strong><strong data-board="<%= @board.price %>" id="showPrice" style="font-size:30px;">.00</strong>
         <div class="form-group">
           pick up
           <input id="checkbox" type="checkbox", "true">
         </div>
         <div id="delivery" style="display:none;">
           <div class="form-group">
             ship it
             <%= render partial: 'chargeshow', locals: {board: @board} %>
           </div>
         </div>
         <div id="pickup" style="display:none;">
           <div class="form-group">
             pick up
             <%= render partial: 'charge', locals: {board: @board} %>
           </div>
         </div>
       <% end %>
    </div>
  <% end %>
</div>
<script>
  $(document).ready(function() {
  var checkbox = document.getElementById('checkbox');
  var delivery_div = document.getElementById('delivery');
  var pickup_div = document.getElementById('pickup');

  delivery_div.style['display'] = 'block';
  var prices = $('#showPrice').data('board');
  var pricing = document.getElementById('showPrice');
  pricing.innerHTML = prices


  checkbox.onclick = function() {
   if(this.checked) {
     pickup_div.style['display'] = 'block';
     delivery_div.style['display'] = 'none';

   } else {
     delivery_div.style['display'] = 'block';
     pickup_div.style['display'] = 'none';
   }
  };
});

</script>
<% end %>

  <div id="forsale">
  <% if !current_user %>
    <% elsif @board.for_sale === true && @board.user_id == current_user.id %>
        <%= render partial: 'forsale', locals: {board: @board} %>
    <% elsif @board.for_sale == false  && @board.user_id == current_user.id%>
    <%= render partial: 'forsale', locals: {board: @board} %>
   <% end %>
  </div>
