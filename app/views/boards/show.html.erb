<style>
.alert{
  position:absolute;
  top:20px;
  z-index: 99;
  left:10px;
}
</style>
<% if flash[:partial] %>
  <script>
    $(document).ready(function () {
      $("#loginModal .modal-content").html('<%= j render partial: "sessions/#{flash[:partial]}" %>');
      $('#loginModal').modal('show');
    });
    alert('email in use login to complete purchase')
  </script>
<% end %>
<div class="modal fade bs-example-modal-xs" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="loginModal">
   <div class="modal-dialog modal-lg" role="document">
     <div class="modal-content" style="background-color:whitesmoke;">
     </div>
   </div>
   <div class="center-text" id="paginator">
   </div>
 </div>
<div id="show-view">
<% if ( user_signed_in? && current_user.id === @board.user.id || @board.customer_id) || (@board.for_sale == true ) %>
<!--  -->
  <div class="well-sm pull-left" style="position:absolute;top:0;z-index:929;">
    <% if (current_user && current_user.owner?(@board)) && (@board.boardSold?) %>
    <div id="editModalBtn"><%= link_to "Edit", edit_board_path, class: 'btn btn-primary pull-right', remote: true, data: { toggle: "modal", target: "#editModal" } %></div>
       <div style="z-index:1000;min-width:50px;min-height:50px;background-color:white;">
        <% if @board.shipping == true %>
          <% if @board.tracking != true || false %>
          <%= render partial: 'tracking', locals: {board: @board} %>
          <% end %>
        <% end %>
        </div>
      <% end %>
  </div>
      <!-- begin view -->
<div class="title center-text">
  <strong><%= @board.title %></strong>
</div>
  <div class="image-box center-text" id="images" style="">
    <%= render partial: 'images', locals: {board: @board}  %>
    <!-- <%=  image_tag("surf_girl.jpg", height: 280, width: 330) %> -->
  </div>
<hr class="style13" style="top:440px;">
  <%= render partial: 'datatable', locals: {board: @board}  %>
<!-- section -->
  <div class="description-modal pull-right" style="padding:30px 7px;position:relative;clear:all;min-width: 75%;">
    <%= @board.description %>
  </div>
<!-- board accesories -->
<div class="center-text">
  <tbody style=position:relative;max-width:25%;>
    <%= render partial: 'accessories/collection' %>
  </tbody>
</div>
</div>

<% if @board.user.accessories.exists? %>
<script>
$(document).ready(function() {
var openAccess = document.getElementById('accessoryBtnOpen');
var hideAccess = document.getElementById('accessoryBtnHide');
var access = document.getElementById('searchAccessories');
openAccess.style.display = 'flex';
hideAccess.style.display = 'none';

openAccess.onclick = function() {
 if(this.style.display == 'flex') {
   this.style['display'] = 'none';
   hideAccess.style['display'] = 'flex';
   access.style['display'] = 'flex';
 }
};
hideAccess.onclick = function() {
 if(this.style.display == 'flex') {
   this.style['display'] = 'none';
   openAccess.style['display'] = 'flex';
   access.style['display'] = 'none';
 }
};
});
</script>

<div style="position: relative;max-height: 27px;z-index: 99;float:right;min-width: 100%;" class="col-sm-12 col-md-12 col-lg-12">
  <div id="accessoryBtnOpen" style="width:100%; display:flex;" class="btn btn-success">Search Accessories </div>
  <div id="accessoryBtnHide" style="width:100%; display:none;background-color:darkgreen;" class="btn btn-primary">Hide</div>
</div>
<div id="searchAccessories"  style="top:10px;display:none;width: 100%;" class="col-md-9">
  <%= render 'accessories/search_accessories_form' %>
</div>
<!-- shop accessories by type -->
<div id="boardAccessories" style="display:flex;position:relative;min-height:100px;min-width:100%;overflow-x:scroll;">
  <%= render partial: 'accessories/search_accessories' %>
 </div>
 <% end %>

<!-- section -->
  <% if @board.rental %>
  <div class="rental-div" style="min-height:100%;">
        <div class="rent-dates">
          <span class="center-text">
            <div id="invisible" data-rubyvar="<%= @board.price %>"></div>
          <div id="number" style="font-size:30px;"><%= @board.price.to_i  %> </div>
          <%= render 'events/form', locals: {events: @events, board: @board} %>
        <!-- section -->
        </span>
        </div>
    <div id="events_calendar" style="max-width:100%;padding-bottom:30px;">
      <%= render 'events/calendar', locals: {events: @events, board: @board} %>
    </div>

</div>

<hr>
<script>
$('input[name="daterange"]').daterangepicker(
{
   locale: {
     format: 'YYYY-MM-DD'
   },
   startDate: "<%= Time.now %>",
   endDate: '<%= Time.now + 1.days%>',
   showDropdowns: true,
   autoApply: true,
   orientation: 'auto top',
   parentEl: '.modal-content'
},
function(start, end, label) {
   if ( start.format('YYYY-MM-DD') < end.format('YYYY-MM-DD') ) {
     var depDate = moment(start);
     var arrDate = moment(end);
     var nbDays = depDate.diff(arrDate, 'days');
     var one = 1;
     var rubyVar = $('#invisible').data('rubyvar');

     alert("A " + (-nbDays + one ) * (rubyVar) +" date range was chosen: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
   }
});
$('input[name="daterange"]').on('apply.daterangepicker', function(ev, picker) {

  alert("A old date range was changed: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));

});
</script>
  <% else %>
<!-- section -->
    <div class="payment center-text">
      <strong style="font-size:30px;">$</strong><strong data-board="<%= @board.price %>" id="showPrice" style="font-size:30px;">.00</strong>
        <% unless @board.sellable? && @board.shippable == true %>
        <div class="form-group">
           Pick Up Only:
          <%= render partial: 'charge', locals: {board: @board} %>
        </div>
        <% else %>
         <div class="form-group">
           pick up
           <input id="checkbox" type="checkbox", "true">
         </div>
         <div id="delivery" style="display:none;">
           <div class="form-group">
             <%= render partial: 'chargeshow', locals: {board: @board} %>
           </div>
         </div>
         <div id="pickup" style="display:none;">
           <div class="form-group">
             <%= render partial: 'charge', locals: {board: @board} %>
           </div>
         </div>
    </div>
</div>


<script>

  $(document).ready(function() {
  var checkbox = document.getElementById('checkbox');
  var delivery_div = document.getElementById('delivery');
  var pickup_div = document.getElementById('pickup');

  delivery_div.style['display'] = 'block';
  var prices = $('#showPrice').data('board');
  var pricing = document.getElementById('showPrice');
  pricing.innerHTML = prices

  checkbox.onclick = function() {
   if(this.checked) {
     pickup_div.style['display'] = 'block';
     delivery_div.style['display'] = 'none';

   } else {
     delivery_div.style['display'] = 'block';
     pickup_div.style['display'] = 'none';
   }
  };
});
</script>
<% end %>
<% end %>
<% end %>

  <div id="forsale">
  <% if current_user %>
    <% if current_user.owner?(@board) %>
    <%= render partial: 'forsale', locals: {board: @board} %>
    <% end %>
    <% else %>
   <% end %>
   <% if !@board.sellable? %>
</div>
<span id="featured-boards"></span>

<script>
var button = document.getElementById('type_available');

button.addEventListener('click', function (e) {
    sel.options[3].selected = true;


    if ("createEvent" in document) {
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent("change", false, true);
        sel.dispatchEvent(evt);
    }
    else {
        sel.fireEvent("onchange");
    }
    $.ajax({
        url:  "/boards/search_type",
        type: "GET",
        data: { type_id: 1
       }
    });
});
</script>
<h2> |Item unavailable| <br> Featured items for type: <%= @board.type.name %></h2>
      <%= render partial: 'featured', locals: {boards: @featuredshow} %>
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="surfModal">
   <div class="modal-dialog modal-lg" role="document">
     <div class="modal-header">
       <button type="button" class="close" style="background-color:black;width:100%;height:30px;border-radius:2%;color:white;" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="closeModal">&times</span></button>
     </div>
     <div class="modal-content">
     </div>
   </div>
   <div class="center-text" id="paginator">
   </div>
 </div>
 <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"  id="accModal">
     <div class="modal-dialog modal-lg" role="document">
       <div class="modal-header">
         <button type="button" class="close" style="background-color:black;width:100%;height:30px;border-radius:2%;color:white;" id="dismissAccModal" aria-label="Close"><span aria-hidden="true" class="closeModal">&times</span></button>
       </div>
       <div style="background-color:azure;" class="modal-content">
       </div>
     </div>
     <div class="center-text" id="paginator">
     </div>
   </div>
   <div id="show_kuivir" class="bcg" style="height: 53px;">
         <h1 class="center-text" id="kuivir-show" style="">
           <%= link_to 'kuivir', root_path %> </h1>
   </div>
<% end %>
