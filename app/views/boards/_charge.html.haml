= form_for Charge.new do |f|
  = f.hidden_field :amount, value: @board.price.round
  = f.hidden_field :item, value: @board.title
  = f.hidden_field :owner_id, value: @board.user_id
  = f.hidden_field :board_id, value: @board.id
  = f.hidden_field :stripeToken
  = f.hidden_field :stripeEmail

  %button#btn-buy.btn.btn-success.btn-lg.btn-block
    %span.glyphicon.glyphicon-ok
    I want this!
  :javascript
    var handler = StripeCheckout.configure({
    key: 'ENV['stripe_publishable_key']',
    token: function(token, arg) {
        document.getElementById("stripeToken").value = token.id;
        document.getElementById("stripeEmail").value = token.email;
        document.getElementById("chargeForm").submit();
      }
    });

    document.getElementById("btn-buy").addEventListener("click", function() {
    handler.open({
    image: '/square-image.png',
    name: 'Demo Site',
      description: '#{ @board.title } ($#{ @board.price })',
      amount: document.getElementById("amount").value
